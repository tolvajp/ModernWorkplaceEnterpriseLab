# Decision Log â€“ Custom domain and tenant branding for identity presentation

---

## Decision ID
- **ID:** DEC-0003
- **Status:** Accepted
- **Date:** 2025-12-24
- **Owner:** Peter Tolvaj

---

## Context
The lab environment aims to demonstrate enterprise-grade Microsoft 365 and Entra ID identity design.
Using the default `.onmicrosoft.com` namespace for user-facing identities and sign-in experiences is not representative of real-world enterprise tenants.

In addition, tenant-level visual branding (sign-in page appearance) improves clarity, recognizability, and consistency of lab artifacts such as screenshots and documentation.

A decision is required to establish a clean, realistic identity namespace and presentation baseline before further identity, security, and automation work continues.

---

## Scope

### In Scope
- Adding and verifying a custom domain in the Entra ID tenant
- Using the custom domain as the primary UPN suffix for lab users
- Configuring Entra ID **Company branding** (sign-in page visuals and text)

### Out of Scope
- Tenant recreation or renaming of the initial `.onmicrosoft.com` domain
- Email routing and Exchange Online DNS configuration (MX, SPF, DKIM, DMARC)
- Conditional Access, MFA, or authentication policy changes
- Device enrollment or endpoint configuration

---

## Decision
Introduce a custom domain and tenant-level branding to standardize identity presentation:

- Custom domain: `modernworkplaceenterpriselab.eu`
- Entra ID Company branding is configured to reflect the lab identity on the sign-in experience

All new identities and user-facing authentication screens will follow this baseline going forward.

---

## Rationale
- Aligns the lab with enterprise identity best practices
- Improves professionalism and clarity of user-facing artifacts
- Establishes a clean baseline before implementing identity governance and automation

---

## Design Principles
- Explicit scoping
- Enterprise realism
- Minimal surface area for change
- Recoverability

---

## Alternatives Considered

| Option | Pros | Cons | Reason Rejected |
|------|------|------|----------------|
| Use default `.onmicrosoft.com` domain | No setup effort | Poor realism, unprofessional UPNs | Not representative of enterprise environments |
| Custom domain without branding | Improves UPNs | Generic sign-in experience | Branding adds clarity at low cost |

---

## Implications

### Positive
- Clean, realistic UPNs for lab users
- Clearly identifiable tenant during authentication
- Improved quality of documentation and screenshots
- Improves user recognition of legitimate sign-in pages, supporting phishing awareness as a UX-based, non-enforced signal.

### Negative
- Requires DNS ownership.
- Additional administrative effort

---

## Security Considerations
- Domain ownership is verified via DNS TXT record
- No impact on authentication strength or access controls
- Branding assets contain no sensitive or identifying data beyond lab name

---

## Rollback / Exit Strategy
- Revert Company branding to default settings in Entra ID
- Change the primary domain back to the tenant default if required
- Remove the custom domain only after ensuring no identities depend on it

---

## Validation
- [x] Custom domain shows **Verified** status in Entra ID
- [x] Custom domain is available as primary UPN suffix
- [x] Company branding preview reflects configured visuals and text

Validation is performed via Entra admin center.

---

## References
- https://learn.microsoft.com/en-us/entra/fundamentals/add-custom-domain
- https://learn.microsoft.com/en-us/entra/fundamentals/company-branding

---

## Notes
This decision establishes the identity presentation baseline for all subsequent lab work.

In a real production environment, users and support teams would be notified in advance about the domain and sign-in experience change.
