# Decision Log – Platform selection (Microsoft Entra ID + Intune)

---

## Decision ID
- **ID:** DEC-0000
- **Status:** Accepted
- **Date:** 2025-12-22
- **Owner:** Peter Tolvaj

---

## Context
This lab models a **modern, enterprise-grade workplace** where access decisions are driven by **identity assurance** and **device trust** (Zero Trust).  
To make later decisions (Conditional Access, device compliance signals, privileged access, lifecycle automation) coherent and realistic, the lab needs a single, integrated platform that can provide:

- A cloud-first **identity control plane** (users, groups, auth methods, roles, conditional access)
- An authoritative **device management control plane** (enrollment, compliance, posture reporting)
- Native integration between identity and device state so that **device signals can be used in access policies**

This decision is architectural: it defines the *platform foundation*. Licensing, baseline hardening, and technical configuration are addressed in subsequent decisions and runbooks.

---

## Scope

### In Scope
- Select the **identity platform** for the lab
- Select the **endpoint management platform** for the lab
- Require that these platforms integrate natively for **identity-driven access control**

### Out of Scope
- Tenant hardening and baseline security configuration
- Conditional Access policy design and rollout
- Device enrollment and endpoint configuration
- Privileged access (PIM), break-glass accounts, governance workflows
- Automation implementation (Graph/PowerShell) beyond validation steps

---

## Decision
I decided to use **Microsoft Entra ID** as the identity platform and **Microsoft Intune** as the endpoint management platform for this lab.

Entra ID will be the **authoritative identity control plane**.  
Intune will be the **authoritative endpoint state and compliance control plane**, providing device-related signals that can be consumed by Entra ID access controls.

---

## Rationale
This platform pairing is chosen to maximize architectural coherence for a Microsoft-centric modern workplace and to support later lab goals without introducing unnecessary integration complexity.

Key reasons:

- **Native identity + device signal integration**: Entra ID and Intune are designed to work together so that device compliance and posture can be used as access conditions.
- **Cloud-first control planes**: Both platforms support a modern operating model without on-prem dependencies as a primary requirement.
- **Enterprise realism**: The combination is widely adopted in Microsoft 365 enterprises and matches real-world patterns recruiters/architects expect to see.
- **Security alignment**: Strong fit for Zero Trust, least privilege administration, and policy-driven access enforcement.
- **Operational clarity**: Clear separation of responsibilities (identity vs. endpoint) while still enabling joined decision-making (Conditional Access using device state).

Intune is a major factor, but it is selected *because* it complements Entra ID and enables identity-driven access patterns. The primary platform decision is therefore **Entra ID + Intune as a cohesive foundation**, not “Intune only”.

---

## Design Principles
- **Cloud-first by default** (avoid forced hybrid/on-prem dependencies)
- **Least privilege** (privileged operations are designed to be constrained and auditable)
- **Recoverability** (clear rollback paths; no silent partial states)
- **Explicit scoping** (decisions and runbooks do only what they claim)
- **Architectural coherence** (identity-driven access control with device trust signals)

---

## Alternatives Considered

| Option | Pros | Cons | Reason Rejected |
|------|------|------|----------------|
| On-prem AD DS + GPO + SCCM/MECM | Mature, deep Windows control | On-prem dependency, weaker cloud identity posture, not cloud-first | Doesn’t match lab goal of cloud-first, identity-driven access |
| Hybrid (AD DS + Entra ID + Co-management) | Realistic transitional model | Higher complexity, hybrid troubleshooting overhead | Adds complexity too early; lab prioritizes a clean baseline |
| Okta (or similar) + Intune | Strong identity product | Extra integration layer, less “native” experience for Microsoft CA/device signals | Reduces architectural coherence for a Microsoft-centric scenario |
| Google Workspace + ChromeOS MDM (or 3rd party MDM) | Strong SaaS ecosystem | Different operating model; weaker alignment with Windows/Entra/Intune goals | Not aligned with intended Modern Workplace architecture focus |
| Jamf/Workspace ONE as primary MDM | Platform specialization | Weaker native Entra integration, additional complexity | Reduces end-to-end identity/device policy cohesion |
| No centralized MDM / local management only | Minimal setup | No device trust/compliance signals; weak governance | Incompatible with Zero Trust and lab objectives |

---

## Implications

### Positive
- Enables Conditional Access decisions based on **identity + device state**
- Clean foundation for later work: CA, compliance, PIM, identity governance, automation
- Aligns lab outputs with common enterprise Microsoft 365 architectures
- Reduces integration risk and “glue work” early in the lab

### Negative
- Requires tenant creation and familiarity with Entra/Intune admin surfaces
- Introduces dependence on cloud control planes and subscription availability
- Misconfiguration risk: identity/device policy mistakes can impact access (managed via later staged rollout)

---

## Security Considerations
- Device state becomes a **security dependency** in access decisions; policy changes must be staged and validated.
- Administrative access must be protected (separate admin accounts, break-glass, MFA strategy, PIM) — handled in later decisions.
- Auditability and change control become important as Conditional Access and compliance policies expand.

Mitigation approach in this lab:
- Incremental rollout of access controls
- Explicit rollback steps in each decision/runbook
- Separate emergency access design (break-glass) in dedicated decisions

---

## Rollback / Exit Strategy
If Entra ID + Intune are no longer suitable as the platform foundation:

- Remove device-based conditions from access control policies (when introduced)
- Stop device enrollment and decommission Intune policies
- Migrate identity objects and access controls to the replacement identity provider
- Update architecture documentation and supersede this decision with a new DEC

This decision does not irreversibly lock the lab into an Intune-dependent design without the ability to unwind policies and enrollment.

---

## Validation
- [x] Platform supports centralized **identity control** (users/groups/roles/auth)
- [x] Platform supports centralized **endpoint control** (enrollment/compliance)
- [x] Device compliance can be used as an access signal in identity controls (architecture capability)
- [x] Admin centers for Entra ID and Intune are accessible in the tenant
- [x] Platforms are officially supported and documented by Microsoft

Validation is performed by:
- Tenant access verification
- Portal availability checks (Entra admin center, Intune admin center)
- Confirming documented integration capability (device compliance as access condition)

No endpoint enrollment, policy rollout, or security hardening is executed as part of this decision.

---

## References
- https://learn.microsoft.com/entra/fundamentals/what-is-entra
- https://learn.microsoft.com/mem/intune/fundamentals/what-is-intune
- https://learn.microsoft.com/entra/identity/conditional-access/concept-conditional-access

---

## Notes
- Tenant registration and initial access validation are captured in **RNB-0000**.
- Licensing and baseline hardening are handled in subsequent decisions to keep this decision purely architectural.
