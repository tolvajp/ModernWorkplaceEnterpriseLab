# Runbook – Custom domain and tenant branding configuration (Entra ID)

## Status
Executed

---

## Preconditions
- [x] Related decision (DEC-0003) is in status **Accepted**
- [x] Ownership and DNS access for `modernworkplaceenterpriselab.eu`
- [x] Administrative access to Entra admin center
- [x] Branding image assets available (artifacts)

---

## Risks & Safety Notes
- DNS propagation delays may affect domain verification timing
- The custom domain cannot be removed while in use by identities
- Branding changes affect all users during sign-in

---

## Procedure

### Step 1 – Preparation
- Review DEC-0005 scope and exclusions
- Confirm DNS access for domain verification
- Ensure branding assets are finalized and approved

---

### Step 2 – Execution

- Execute the domain registration script:
  - Run `RNB-0003-AddCustomDomain.ps1`
  - Capture the DNS TXT verification record from the script output
- Create the DNS TXT record at the domain registrar
- Wait for DNS propagation and verify the domain
- Execute the branding and primary domain script:
  - Run `RNB-0003-PrimaryDomain-CompanyBranding.ps1`

Microsoft documentation:
- https://learn.microsoft.com/en-us/entra/fundamentals/add-custom-domain
- https://learn.microsoft.com/en-us/entra/fundamentals/company-branding

---

### Step 3 – Validation
- Confirm domain status is **Verified**
- Confirm primary domain selection
- Preview sign-in experience and verify correct branding

---

## Validation Checklist
- [X] Default domain changed
- [X] Identity presentation matches expected state
- [X] Evidence captured if required

---

## Rollback / Exit Strategy
- Revert Company branding to default settings
- Reset primary domain if necessary
- Remove custom domain only after all dependencies are cleared

---

## Evidence & Artifacts
- Branding images (screenshots, background, logo)
- Domain verification confirmation

---

## Notes
Subsequent runbooks will assume this identity presentation baseline.
